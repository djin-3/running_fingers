# Running Fingers

指を足に見立ててタップで走るRobloxゲーム

## プロジェクト概要

| 項目 | 内容 |
|------|------|
| **コンセプト** | 指を足に見立て、左右交互にタップして走る |
| **ターゲット** | スコアアタック勢（将来的に大会も見据える） |
| **プラットフォーム** | Roblox（成功後にFlutter版も検討） |
| **マネタイズ** | Robux（ゲームパス、スキン販売）、Premium Payouts |

## 技術スタック

| 項目 | 技術 |
|------|------|
| **エンジン** | Roblox Studio |
| **言語** | Luau |
| **AI支援** | Claude Code + robloxstudio-mcp |
| **バージョン管理** | Git + GitHub |

---

## 開発ロードマップ

### Phase 0: 環境構築 🔄 現在のフェーズ

- [ ] Roblox Studioインストール
- [ ] robloxstudio-mcp セットアップ
  - [ ] `claude mcp add robloxstudio -- npx robloxstudio-mcp`
  - [ ] Roblox Studioプラグインインストール
  - [ ] HTTP Requests有効化
- [ ] MCPの動作確認
- [ ] 新規プロジェクト作成

### Phase 1: プロトタイプ

- [ ] 基本画面レイアウト作成
  - [ ] 2D GUI（ScreenGui）でボタン配置
  - [ ] 左右ボタンの配置
  - [ ] タイマー/カウンター表示エリア
- [ ] タップ検出の実装
  - [ ] 左右交互タップの検出
  - [ ] 同じ側連続タップの無効化
  - [ ] タップ精度の検証
- [ ] 基本的なカウント機能

### Phase 2: コア機能実装

- [ ] タイムアタックモード（100回）
  - [ ] 100回タップまでの時間計測
  - [ ] 1/100秒単位の精度
- [ ] タップチャレンジモード（10秒）
  - [ ] 10秒間のタップ数計測
- [ ] スタート合図システム
  - [ ] "On your mark" → "Set" → "Go!!" フロー
  - [ ] ランダム待機（1.5〜3秒）
- [ ] フライング判定とペナルティ
  - [ ] タップチャレンジ: マイナスからカウントアップ
  - [ ] タイムアタック: 一定秒数タップ無効

### Phase 3: データ保存・リザルト

- [ ] DataStoreでの記録保存
  - [ ] 自己ベスト記録
  - [ ] 直近10回の履歴
- [ ] リザルト画面
  - [ ] 今回の記録表示
  - [ ] ベストとの差分表示
  - [ ] 履歴一覧
- [ ] ホーム画面（モード選択）

### Phase 4: UI/UX改善

- [ ] ビジュアルフィードバック
  - [ ] 正常タップ: ボタンが光る
  - [ ] 無効タップ: 異なる色で表示
- [ ] 効果音
- [ ] アニメーション演出
- [ ] モバイル最適化

### Phase 5: 公開準備

- [ ] ゲームアイコン・サムネイル作成
- [ ] ゲーム説明文作成
- [ ] テストプレイ・バグ修正
- [ ] Robloxで公開

### Phase 6: 収益化

- [ ] ゲームパス設計（広告非表示など）
- [ ] スキン・カスタマイズ要素
- [ ] Premium Payouts設定

### Phase 7: 拡張機能（将来）

- [ ] 追加モード（200回、500回、30秒、60秒など）
- [ ] 4本指モード
- [ ] グローバルランキング
- [ ] 2人対戦モード
- [ ] シェア機能

---

## ゲーム仕様

### ゲームモード

#### タイムアタック（100回）
- 100回タップするまでの時間を計測
- 1/100秒単位の精度

#### タップチャレンジ（10秒）
- 10秒間で何回タップできるかを計測

### コアルール

#### 左右交互タップ
- 画面下部に左右2つのボタンを配置
- 左→右→左→右... と交互にタップ
- 同じ側を連続タップした場合、最初の1回のみカウント

#### タップフィードバック
| 種類 | 演出 |
|------|------|
| 正常タップ | ボタンが光る/色が変わる |
| 無効タップ | 異なる色で視覚的にフィードバック |
| 振動 | なし（連打ゲームのため） |

#### スタートフロー
1. モード選択後、「スタート」ボタンを押す
2. "On your mark"（固定秒数表示）
3. "Set"（ランダム待機: 1.5〜3秒）
4. "Go!!"（タップ開始）

#### フライングペナルティ
| モード | ペナルティ |
|--------|-----------|
| タップチャレンジ | マイナス表示からカウントアップ（例: -10から開始） |
| タイムアタック | 一定秒数タップが無効 |

### 画面構成

```
┌───────────────────────┐
│                       │
│   タイマー/           │
│   カウンター表示      │
│                       │
├───────────┬───────────┤
│  左ボタン  │  右ボタン  │
└───────────┴───────────┘
```

### 画面遷移

```
1. ホーム画面
   ├─ タイムアタック選択 → プレイ画面（100回）
   └─ タップチャレンジ選択 → プレイ画面（10秒）

2. プレイ画面
   - 「スタート」ボタン押下
   - "On your mark" → "Set" → "Go!!"
   - タップ開始
   - フライング時: ペナルティ演出
   └─ 完了 → リザルト画面

3. リザルト画面
   - 今回の記録
   - ベストとの差分
   - 履歴表示
   ├─ 「もう一度」→ プレイ画面
   └─ 「メニュー」→ ホーム画面

※ 中断時（バックグラウンド等）: 記録破棄してホームへ
```

---

## データ構造

### DataStore設計

```lua
-- プレイヤーデータ
PlayerData = {
    timeAttack100 = {
        best = {
            time = 12.34,  -- 秒
            date = 1706789012,  -- Unix timestamp
            hadFalseStart = false
        },
        history = {
            -- 直近10件
            { time = 12.34, date = 1706789012, hadFalseStart = false },
            -- ...
        }
    },
    tapChallenge10s = {
        best = {
            taps = 156,
            date = 1706789012,
            hadFalseStart = false
        },
        history = {
            { taps = 156, date = 1706789012, hadFalseStart = false },
            -- ...
        }
    }
}
```

---

## 重要な設計ポイント

### 1. タップ精度が最重要
連打ゲームでタップ漏れや誤検出は致命的。プロトタイプ段階で徹底的に検証する。

### 2. フライングは駆け引き要素
大会を見据えているため、フライングでのリスタートではなく、ペナルティ制を採用。見切りスタートも戦略の一つ。

### 3. モバイルファースト
Robloxユーザーの多くはモバイル。タップ操作の快適さを最優先。

---

## MCPセットアップ手順

### 1. robloxstudio-mcpのインストール

```bash
claude mcp add robloxstudio -- npx robloxstudio-mcp
```

### 2. Roblox Studioプラグインのインストール

1. Roblox Studioを開く
2. プラグインマネージャーから「robloxstudio-mcp」をインストール
   - または: https://create.roblox.com/store/asset/YOUR_PLUGIN_ID

### 3. HTTP Requestsの有効化

1. Roblox Studioでゲームを開く
2. ゲーム設定 > セキュリティ
3. 「Allow HTTP Requests」を有効化

### 4. 動作確認

Claude Codeで以下を試す:
- ゲーム構造の確認
- 簡単なスクリプト作成

---

## 次のステップ

**現在: Phase 0 - 環境構築**

1. Roblox Studioをインストール
2. robloxstudio-mcpをセットアップ
3. 新規プロジェクトを作成
4. MCPの動作確認

---

## 開発メモ

- 開発開始日: 2026-01-31
- 現在のフェーズ: Phase 0（環境構築）
- Flutter版は Roblox版が成功した後に検討
