# Running Fingers 🏃‍♂️

指を足に見立ててタップで走るスマホゲーム

## プロジェクト概要

- **コンセプト**: 指を足に見立て、左右交互にタップして走る
- **ターゲット**: スコアアタック勢（将来的に大会も見据える）
- **プラットフォーム**: Web / iOS / Android（将来的にNintendo Switchも視野）
- **マネタイズ**: 広告 or 投げ銭

## 技術スタック

- **フレームワーク**: Flutter
- **開発環境**: Windows + Visual Studio Code
- **ホスティング**: GitHub Pages（将来的にVercel/Netlify移行も検討）
- **データ保存**: SharedPreferences（ローカルストレージ）

## MVP仕様（Phase1で実装）

### ゲームモード
- **タイムアタック**: 100回タップするまでの時間を計測（1/100秒単位）
- **タップチャレンジ**: 10秒間で何回タップできるかを計測

### コアルール

#### 1. 左右交互タップ
- 画面下部に左右2つのボタンを配置
- 左→右→左→右... と交互にタップする必要がある
- 同じ側を連続タップした場合、最初の1回のみカウント

**タップフィードバック:**
- **振動**: なし（何百回もタップするため不要）
- **効果音**: ハイペース時に実装
- **視覚効果**:
  - 正常タップ: ボタンが光る/色が変わる
  - 無効タップ（同じ側連続）: 異なる色で視覚的にフィードバック
- **無効タップの記録**: 統計として記録する可能性あり（MVPでは検討中）

#### 2. スタート合図とフライング

**スタートフロー:**
1. モード選択後、プレイヤーが「スタート」ボタンを押す
2. "On your mark"（固定秒数表示）
3. "Set"（ランダム待機: 1.5〜3秒）
4. "Go!!"（タップ開始）

**フライング:**
- スタート合図（"Go!!"）より前にタップした場合がペナルティ対象
- **タップチャレンジのペナルティ演出**:
  - マイナス表示からカウントアップ
  - 例: ペナルティが10回分なら、カウンターが「-10」から始まり、タップで「-9, -8, ...0」と増え、0になったら正式カウント開始
- **タイムアタックのペナルティ演出**:
  - 一定秒数タップが無効（ペナルティの値は実装後に調整）
- **駆け引き要素**: "Go!!"と同時またはジャストタイミングでのスタートは合法（見切りスタート可能）

#### 3. データ保存
- 各モードの自己ベスト記録
- 直近10回分のプレイ履歴
- 記録内容: タイム/タップ数、日時、フライングの有無

### 画面構成

```
┌───────────────────────┐
│                       │
│   タイマー/           │
│   カウンター表示      │
│                       │
├───────────┬───────────┤
│  左ボタン  │  右ボタン  │
└───────────┴───────────┘
```

### 画面遷移

```
1. ホーム画面
   ├─ タイムアタック選択 → プレイ画面（100回）
   └─ タップチャレンジ選択 → プレイ画面（10秒）

2. プレイ画面
   - プレイヤーが「スタート」ボタンを押す
   - "On your mark"表示（固定秒数）
   - "Set"表示（ランダム待機: 1.5-3秒）
   - "Go!!"表示
   - タップエリア表示・カウント開始
   - フライング時: ペナルティ演出（マイナス表示からカウントアップ）
   └─ 完了 → リザルト画面

3. リザルト画面
   - 今回の記録表示
   - 自己ベストとの差分表示（例: 「ベストより-0.5秒速い！」）
   - 直近10回の履歴表示（記録順リスト）
   - フライングの有無表示
   ├─ 「もう一度」ボタン → プレイ画面
   └─ 「メニュー」ボタン → ホーム画面

**中断時の処理:**
- プレイ中にアプリがバックグラウンドになった場合: 記録を破棄してホームに戻る
```

## MVP範囲外（将来実装）

### Phase4で追加予定
- 他のモード（200回、500回、1000回、30秒、60秒、100秒）
- 4本指モード
- PC版（キーボード操作: DFキー + JKキー）
  - 課題: キーボードとタップの反応速度差による公平性
- **2人対戦モード**: スマホの画面を上下に分割して対戦
  - 1台のスマホで2人が遊べる
  - 技術的に可能なら実装
- 世界ランキング（サーバー・チート対策）
- シェア機能
- 挑戦状URL（ゴーストバトル）

## 開発ロードマップ

### Phase0：設計 ✅（このドキュメント）
- [x] 機能仕様作成
- [x] 画面遷移図
- [x] データ構造設計
- [x] 技術スタック最終確定
- [ ] 開発環境構築手順

### Phase1：MVP開発（Web版リリース）
- [ ] Flutter環境構築（Windows）
- [ ] プロトタイプ作成
  - [ ] 画面レイアウト
  - [ ] タップカウント機能
  - [ ] 左右交互検出の精度検証
- [ ] コア機能実装
  - [ ] タイムアタック（100回）
  - [ ] タップチャレンジ（10秒）
  - [ ] スタート合図とランダム待機
  - [ ] フライング判定とペナルティ演出
- [ ] データ保存
  - [ ] SharedPreferences実装
  - [ ] 自己ベスト保存
  - [ ] 履歴10件保存
- [ ] UI/UX
  - [ ] リザルト画面
  - [ ] 効果音
  - [ ] バイブレーション
- [ ] Web版リリース
  - [ ] ビルド
  - [ ] GitHub Pagesデプロイ

### Phase2：改善期間
- [ ] フィードバック収集
- [ ] バグ修正
- [ ] UX改善（タップ感度など）

### Phase3：モバイルアプリリリース
- [ ] Android版
- [ ] iOS版

### Phase4：機能追加
- [ ] 追加モード
- [ ] ランキング機能
- [ ] シェア機能

## データ構造（JSON）

```json
{
  "time_attack_100_2fingers_best": {
    "time": 12.34,
    "date": "2026-01-15T10:30:00Z",
    "hasFlying": false
  },
  "time_attack_100_2fingers_history": [
    {
      "time": 12.34,
      "date": "2026-01-15T10:30:00Z",
      "hasFlying": false
    }
  ],
  "tap_challenge_10s_2fingers_best": {
    "taps": 156,
    "date": "2026-01-15T11:00:00Z",
    "hasFlying": false
  },
  "tap_challenge_10s_2fingers_history": [
    {
      "taps": 156,
      "date": "2026-01-15T11:00:00Z",
      "hasFlying": false
    }
  ]
}
```

## 次のステップ

1. **Flutter環境構築**（Windows）
   - Flutter SDK インストール
   - VS Code 拡張機能インストール
   - 動作確認

2. **プロトタイプ作成**
   - 基本的な画面レイアウト
   - タップカウント機能
   - 左右交互検出の実装と精度検証

## 重要な設計ポイント

### 1. タップ精度が最重要
連打ゲームでタップ漏れや誤検出は致命的。プロトタイプ段階で徹底的に検証する。

### 2. フライングは駆け引き要素
大会を見据えているため、フライングでのリスタートではなく、ペナルティ制を採用。見切りスタートも戦略の一つ。

### 3. 学習しながら開発
技術知識ほぼゼロからのスタート。コードの意味を理解しながら段階的に実装。

## 開発メモ

- 現在のブランチ: `claude/tap-running-game-design-l6QJT`
- 開発完了後は同ブランチにpush
